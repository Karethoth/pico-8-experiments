pico-8 cartridge // http://www.pico-8.com
version 32
__lua__
local slider = {}
function _init()
	slider.val = 5
	slider.max = 7
	slider.min = 1
	slider.pos = {x=10,y=10}
	music(1)
end



function _update()
	if btn(3) and slider.val > slider.min then
		slider.val -= 1
		change_vol(slider.val)
	end
	if btn(2) and slider.val < slider.max then
		slider.val += 1
		change_vol(slider.val)
	end
end

function _draw()
	cls()
	draw_slider(slider)
end


function draw_slider(s)
 pos_x = s.pos.x
 pos_y = s.pos.y

	diff = s.max - s.min

	spr(2,pos_x,pos_y+diff)
 
 for i=0,s.max-s.min+1,2 do
		spr(3,pos_x,pos_y+i)
	end
	
	spr(4,10,pos_y+s.min+diff-s.val)
	spr(1,pos_x,pos_y)
end

function change_vol(vol)
	sfxaddr = 0x3200
	vol *= 2
	
	for j=0,2 do
		for i=1, 64, 2 do
			addr = sfxaddr + j*68 + i
			hbyte = @(addr)
			if hbyte > 0 then
				hbyte &= 0xf1
				hbyte |= vol
				poke(addr, hbyte)
			end
		end
	end
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007000cccccc00000000000000000009119000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000011111100000000000011000009119000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000cccccc000011000009999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070000000000011111100000000000aaaa000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
010f00001015000100101531015300100001001015000100001001015000100001001015310100101501010010150001001015310153001000010010150001000010010150001000010010153001001015000100
001000000b3000b3000b3000b30000300003000030000300203002330027300253002430023300213001f3001c0001c0000000000000000000000000000000000000000000000000000000000000000000000000
__music__
01 00424344
03 00014344

