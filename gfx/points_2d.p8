pico-8 cartridge // http://www.pico-8.com
version 32
__lua__
function _init()
	points = {} -- x, y, r, color
	for i=0, 200 do
		add(points, {
			rnd(128), rnd(128),
			rnd(25)+3,
			rnd(15)+1
		})
	end
	draw_points = {}
end

function create_rot_vec_2d(a)
	return {cos(a), -sin(a),
	        sin(a),  cos(a)}
end

function rotate_vec_2d(m, v)
	x = v[1] * m[1] - v[2] * m[2]
 y = v[1] * m[3] + v[2] * m[4]
	return {x, y}
end

function _update()
	m = create_rot_vec_2d(t()/1)
	draw_points = {}
	for i=1,#points do
	 c_x = points[i][1]
	 c_y = points[i][2]
		p = rotate_vec_2d(
			m, {points[i][3],	0}
		)
		add(draw_points,{
			c_x + p[1],
			c_y + p[2],
			points[i][4]
		})
	end
end

function _draw()
	cls()
	for i=1,#draw_points do
		pset(draw_points[i][1],
	      draw_points[i][2],
	      draw_points[i][3])
	end
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
